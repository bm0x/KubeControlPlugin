# KubeControlPlugin Configuration

# ==========================================
# Módulo Discord (JDA + DiscordSRV)
# ==========================================
discord:
  enabled: true
  # Nota: El Bot Token se configura en /plugins/DiscordSRV/config.yml
  # KubeControl usa la conexión de DiscordSRV.
  
  # Canales para mensajes específicos (IDs numéricas)
  channels:
    verification: "123456789012345678"  # Donde se envía el botón de "Verificar"
    logs: "123456789012345678"          # Logs de auditoría

  # Botón de Auto-Validación (Discord Nativo)
  native-validation:
    enabled: true
    button-label: "✅ Aceptar Reglas y Verificarse"
    server-name: "Servidor X"
    message-text: "**¡Bienvenido a {server_name}!**\nPor favor, lee las reglas y pulsa el botón para verificarte."
    # Roles que se asignan al pulsar el botón (Lista de IDs)
    reward-role-ids: 
      - "999999999999999999"    # Rol 1 (Ej: Miembro)
      - "000000000000000000"    # Rol 2 (Ej: Verificado)
    
    # Comandos de consola a ejecutar si el usuario tiene cuenta vinculada
    # Usa %player% para el nombre del jugador
    reward-commands:
      - "lp user %player% parent set default"
      - "say ¡%player% se ha verificado en Discord!"

# ==========================================
# Sincronización de Roles (Bidireccional)
# ==========================================
sync:
  enabled: true
  interval: 60 # Segundos entre comprobaciones

  # Discord -> Minecraft
  # Si el usuario tiene X rol en Discord, ejecutamos comandos en MC
  discord-to-game:
    server-booster:
      # ID del Rol "Server Booster" en Discord
      discord-role-id: "000000000000000000"
      # Comandos a ejecutar (solo una vez o periódicamente, lógica a implementar)
      # Para evitar spam, el plugin necesitaría persistencia. 
      # Por simplicidad, podríamos aplicar grupos LP que son idempotentes.
      commands:
        - "lp user %player% parent addtemp booster 1d" 
        # Nota: Usar addtemp asegura que si pierde el rol, expire. 
        # O usar un sistema de sync más complejo.
      
      # Opción Simple: Asignar Permiso/Grupo LuckPerms directamente si es posible, 
      # pero comandos da más libertad.
      
  # Minecraft -> Discord
  # Si el usuario tiene X permiso/dinero en MC, gana X rol en Discord
  game-to-discord:
    miembro-regular:
      # Si no tiene ningún rol especial (podemos usar negaciones o permisos)
      # condición: "permission:kubecontrol.group.regular"
      minecraft-permission: "kubecontrol.group.regular"
      give-discord-role-id: "888888888888888888"
      
    economy-magnate:
      min-balance: 10000.0
      give-discord-role-id: "777777777777777777"

# ==========================================
# Bridge (Integración TUI)
# ==========================================
bridge:
  export-interval: 5 # Segundos
  output-file: "server-state.json" # Se guarda en la raiz del servidor

# ==========================================
# Mensajes
# ==========================================
messages:
  prefix: "&8[&bKubeControl&8] &r"
  reload: "&aConfiguración recargada correctamente."
  no-permission: "&cNo tienes permisos para esto."
